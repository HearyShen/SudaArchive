% % 计算机图形学 实验七
% ex7.m
% 1427405017  沈家S
% 2017.6.15

clear
close all
clc

%% 0) 示例树
a=[0.195  -0.488   0.344   0.433   0.4431   0.2452   0.25;
   0.462   0.414  -0.252   0.361   0.2511   0.5692   0.25;
  -0.058  -0.07    0.453  -0.111   0.5976   0.0969   0.25;
  -0.035   0.07   -0.469  -0.022   0.4884   0.5069   0.2;
  -0.637   0       0       0.501   0.8562   0.2513   0.05];

figure
plotTree(a,10000);

%% 1) 修改代码样例中的参数，绘制另一颗树来。

a=[0       0      0      0.16   0      0     0.01;
   0.85    0.04  -0.04   0.85   0      1.6   0.85;
   0.2    -0.26   0.23   0.22   0.01   1.6   0.07;
  -0.15    0.28   0.26   0.24   0      0.44  0.07;
   0       0      0      0      0      0     0];

figure
plotTree(a,10000);

%% 2) 改动程序，制作出一个树叶摇动的动画。


a1=[0       0      0      0.16   0      0     0.01;
    0.855   0.035 -0.035  0.855  0      1.6   0.85;
    0.2    -0.26   0.23   0.22   0.01   1.6   0.07;
   -0.15    0.28   0.26   0.24   0      0.44  0.07;
    0       0      0      0      0      0     0];

a2=[0       0      0      0.16   0      0     0.01;
    0.852   0.038 -0.038  0.852  0      1.6   0.85;
    0.2    -0.26   0.23   0.22   0.01   1.6   0.07;
   -0.15    0.28   0.26   0.24   0      0.44  0.07;
    0       0      0      0      0      0     0];

a3=[0       0      0      0.16   0      0     0.01;
    0.85    0.04  -0.04   0.85   0      1.6   0.85;
    0.2    -0.26   0.23   0.22   0.01   1.6   0.07;
   -0.15    0.28   0.26   0.24   0      0.44  0.07;
    0       0      0      0      0      0     0];

a4=[0       0      0      0.16   0      0     0.01;
    0.847   0.043 -0.043  0.847  0      1.6   0.85;
    0.2    -0.26   0.23   0.22   0.01   1.6   0.07;
   -0.15    0.28   0.26   0.24   0      0.44  0.07;
    0       0      0      0      0      0     0];

a5=[0       0      0      0.16   0      0     0.01;
    0.845   0.045 -0.045  0.845  0      1.6   0.85;
    0.2    -0.26   0.23   0.22   0.01   1.6   0.07;
   -0.15    0.28   0.26   0.24   0      0.44  0.07;
    0       0      0      0      0      0     0];

A={a1 a2 a3 a4 a5 a4 a3 a2 a1};

figure
for turn=1:3    % 连续显示3轮
    for i=1:length(A)

        figure
        plotTree(A{i},5000);    % 每次绘制1000点，过少则图形不显著，过多则计算缓慢，动画效果差
        hold on;
        axis([-4 4 0 12]);
        title(i)    % 显示当前帧序号
        hold off

        pause(1.0);
    end
end
